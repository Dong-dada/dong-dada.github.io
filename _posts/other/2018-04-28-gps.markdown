---
layout: post
title:  "GPS 定位基本原理"
date:   2018-04-28 18:30:30 +0800
categories: other
---

* TOC
{:toc}


这两天机缘巧合了解了一下 GPS 的基本原理，感觉挺有意思的，在这儿记录一下。

首先得确定一下坐标系，不然不好描述位置，我没找到描述这个坐标系的文章(因为不知道该怎么描述这个关键字)，不过这样来设置：
- 卫星绕地球转，所以设置地球重心为坐标系原点；
- 卫星绕地球相对运动，所以设置在这个坐标系下地球不动；

在这个坐标系里有四个变量 x,y,z,t

GPS 卫星通过一些神奇的手段(原子钟、星历之类的)，可以随时知道它自己的 x,y,z,t 值。

地球上的设备，理论上来说是知道自己的 t' 值的，但是设备晶振显然没有原子钟那么准，所以这个 t' 值可以认为是没用的，那么对设备来说， x', y', z', t' 这四个值都是未知的。

接着，卫星会不断把自己的 x, y, z, t 值发给设备。由于有光速 c 的存在，设备收到卫星的数据之后，可以用两种方式来推算出自己和卫星之间的距离 S:

```
// 通过 t 计算
S = c(t' - t)

// 通过 x,y,z 计算
S = sqrt( (x' - x)^2 + (y' - y)^2 + (z' - z)^2 )
```

这两种方式的计算结果应该是一样的，所以可以推导出一个等式：

```
c(t' - t) == sqrt( (x' - x)^2 + (y' - y)^2 + (z' - z)^2 )
```

现在要解这个方程，其中 x', y', z', t' 这四个值都是未知数，显然需要四组等式才能计算出来，所以 GPS 定位至少需要 4 颗卫星。


## 一些疑问

不过我也比较好奇，如果一颗卫星分 4 次发送数据，岂不是也可以完成定位？这点我没找啥文章来说明。

另外，虽然可以确定地理的 x,y,z 坐标，但是怎么把这些坐标转化为经纬度信息呢？毕竟地球不是一个完美的球体，这一点我也没太想明白。
