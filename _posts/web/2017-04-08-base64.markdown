---
layout: post
title:  "Base64 编码原理"
date:   2017-04-08 12:11:30 +0800
categories: web
---

* TOC
{:toc}

以前只知道 base64 的作用是将二进制数据转换为纯文本数据 (ASCII 编码)，中间的转换过程没有详细了解过，今天整理一下：

## Base64 的定义和作用

Base64 是一种基于 64 个可打印字符来表示二进制数据的表示方法。由于 2 的 6 次方等于 64，所以每 6 个比特为一个单元，对应某个可打印字符。三个字节有 24 个比特，对应于 4 个 Base64 单元，即 3 个字节可表示为 4 个可打印字符。它可用来作为电子邮件的传输编码。

Base64 常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据。包括 MIME 的 email、在 XML 中存储复杂数据。

以上内容来自 [维基百科 Base64](https://zh.wikipedia.org/wiki/Base64)。


## 编码方法

我们以字符串 "Man" 举例来说明 Base64 的编码过程：

![]( {{ site.url }}/asset/base64-encoding.png )

这个过程很简单，就不再重复描述了。

值得一提的是，如果要编码的字节数不能被 3 整除，也就是说最后少 1 个或 2 个字节。可以把少了的字节用 0 来补足，使其能够被 3 整除，然后再进行 base64 编码：

![]( {{ site.url }}/asset/base64-ending.png )

编码的时候，会对最后缺少的 1 个或 2 个字节做特殊处理，虽然它们是 0, 但是并不对应于 Base64 索引表中的 A, 而是用 1 个或 2 个 "=" 来替代。

解码的时候，遇到结尾的 "=" 会直接忽略。
